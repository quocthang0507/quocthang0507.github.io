function showAlert(e,t="info"){const n=document.getElementById("alert-container");if(!n)return;const o=document.createElement("div");o.className=`alert alert-${t} alert-dismissible fade show`;const a=document.createElement("span");a.textContent=e;const c=document.createElement("button");c.type="button",c.className="btn-close",c.setAttribute("data-bs-dismiss","alert"),c.setAttribute("aria-label","Close"),o.appendChild(a),o.appendChild(c),n.appendChild(o),setTimeout(()=>{o.parentNode&&o.remove()},5e3)}function copyToClipboard(e){const t=()=>(showAlert("Đã sao chép vào clipboard!","success"),"undefined"!=typeof gtag&&gtag("event","copy_to_clipboard",{event_category:"user_interaction",event_label:"clipboard_copy"}),!0),n=()=>(showAlert("Không thể sao chép. Vui lòng thử lại.","danger"),"undefined"!=typeof gtag&&gtag("event","copy_failed",{event_category:"user_interaction",event_label:"clipboard_copy_failed"}),!1);if(navigator.clipboard&&navigator.clipboard.writeText)return navigator.clipboard.writeText(e).then(t).catch(n);const o=fallbackCopyToClipboard(e);return Promise.resolve(o?t():n())}function fallbackCopyToClipboard(e){if(!document.body)return!1;const t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.select();let n=!1;try{n="function"==typeof document.execCommand&&document.execCommand("copy")}catch(e){n=!1}return document.body.removeChild(t),n}function saveToLocalStorage(e,t){try{return localStorage.setItem(e,JSON.stringify(t)),!0}catch(e){return console.error("Cannot save to localStorage:",e),!1}}function loadFromLocalStorage(e){try{const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch(e){return console.error("Cannot load from localStorage:",e),null}}function initializeDarkMode(){const e=document.getElementById("dark-mode-toggle");document.getElementById("dark-mode-icon");let t=null;try{t=localStorage.getItem("theme")}catch(e){t=null}const n=t||"light";document.documentElement.setAttribute("data-theme",n),updateDarkModeIcon(n),e&&e.addEventListener("click",function(){const e="dark"===document.documentElement.getAttribute("data-theme")?"light":"dark";document.documentElement.setAttribute("data-theme",e);try{localStorage.setItem("theme",e)}catch(e){}updateDarkModeIcon(e),"undefined"!=typeof gtag&&gtag("event","theme_change",{event_category:"user_interface",event_label:e,theme_switched_to:e})});const o=window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null;if(o){const e=function(e){let t=!1;try{t=!!localStorage.getItem("theme")}catch(e){t=!1}if(!t){const t=e.matches?"dark":"light";document.documentElement.setAttribute("data-theme",t),updateDarkModeIcon(t)}};o.addEventListener?o.addEventListener("change",e):o.addListener&&o.addListener(e)}}function updateDarkModeIcon(e){const t=document.getElementById("dark-mode-icon");t&&("dark"===e?(t.className="fas fa-sun",t.parentElement.title="Switch to Light Mode"):(t.className="fas fa-moon",t.parentElement.title="Switch to Dark Mode"))}function initializeCustomThemeToggle(){let e=null;try{e=localStorage.getItem("customTheme")}catch(t){e=null}"on"===e&&document.body.classList.add("custom-theme"),document.addEventListener("click",e=>{if(e.target.closest('[data-action="toggle-custom-theme"]')){const e=document.body.classList.toggle("custom-theme");try{localStorage.setItem("customTheme",e?"on":"off")}catch(e){}announceThemeChange(e),"undefined"!=typeof gtag&&gtag("event","custom_theme_toggle",{event_category:"user_interface",enabled:e})}})}function announceThemeChange(e){let t=document.getElementById("global-live-region");if(!t)return;const n=e?"ui.custom_theme_on":"ui.custom_theme_off",o=window.translationSystem&&window.translationSystem.t?window.translationSystem.t(n):e?"Enhanced theme ON":"Enhanced theme OFF";t.textContent=o}function injectSettingsFloatingButton(){if(document.getElementById("settings-fab"))return;const e=document.createElement("button");e.id="settings-fab",e.className="settings-fab",e.type="button",e.setAttribute("aria-label","Settings"),e.innerHTML='<i class="fas fa-gear"></i>',e.addEventListener("click",openQuickSettingsPanel),document.body.appendChild(e)}function openQuickSettingsPanel(){let e=document.getElementById("quick-settings-panel");e?e.classList.toggle("open"):(e=document.createElement("div"),e.id="quick-settings-panel",e.className="quick-settings-panel",e.innerHTML=`\n      <div class="qs-header">\n        <strong>${window.t?window.t("ui.settings"):"Settings"}</strong>\n        <button type="button" class="btn-close" aria-label="Close" data-action="close-qsp"></button>\n      </div>\n      <div class="qs-body">\n        <button class="btn btn-sm btn-outline-primary w-100 mb-2" data-action="toggle-custom-theme">${window.t?window.t("ui.toggle_custom_theme"):"Toggle enhanced theme"}</button>\n        <button class="btn btn-sm btn-outline-secondary w-100" data-action="close-qsp">${window.t?window.t("ui.close"):"Close"}</button>\n      </div>`,e.addEventListener("click",t=>{t.target.matches('[data-action="close-qsp"]')&&e.classList.remove("open")}),document.body.appendChild(e),requestAnimationFrame(()=>e.classList.add("open")))}document.addEventListener("DOMContentLoaded",function(){initializeDarkMode(),initializeCustomThemeToggle();[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map(function(e){return new bootstrap.Tooltip(e)});document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const t=document.querySelector(this.getAttribute("href"));t&&t.scrollIntoView({behavior:"smooth"})})});const e=window.location.pathname;document.querySelectorAll(".navbar-nav .nav-link").forEach(t=>{const n=t.getAttribute("href");n===e||"/"===e&&"/"===n?t.classList.add("active"):t.classList.remove("active")})}),"undefined"!=typeof module&&module.exports&&(module.exports={showAlert:showAlert,copyToClipboard:copyToClipboard,fallbackCopyToClipboard:fallbackCopyToClipboard,saveToLocalStorage:saveToLocalStorage,loadFromLocalStorage:loadFromLocalStorage,initializeDarkMode:initializeDarkMode,updateDarkModeIcon:updateDarkModeIcon,initializeCustomThemeToggle:initializeCustomThemeToggle,announceThemeChange:announceThemeChange,injectSettingsFloatingButton:injectSettingsFloatingButton,openQuickSettingsPanel:openQuickSettingsPanel});