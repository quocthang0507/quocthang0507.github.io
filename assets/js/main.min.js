function showAlert(t,e="info"){const n=document.getElementById("alert-container");if(n){const o=document.createElement("div");o.className=`alert alert-${e} alert-dismissible fade show`,o.innerHTML=`\n            ${t}\n            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>\n        `,n.appendChild(o),setTimeout(()=>{o.parentNode&&o.remove()},5e3)}}function copyToClipboard(t){navigator.clipboard.writeText(t).then(()=>{showAlert("Đã sao chép vào clipboard!","success"),"undefined"!=typeof gtag&&gtag("event","copy_to_clipboard",{event_category:"user_interaction",event_label:"clipboard_copy"})}).catch(()=>{showAlert("Không thể sao chép. Vui lòng thử lại.","danger"),"undefined"!=typeof gtag&&gtag("event","copy_failed",{event_category:"user_interaction",event_label:"clipboard_copy_failed"})})}function saveToLocalStorage(t,e){try{return localStorage.setItem(t,JSON.stringify(e)),!0}catch(t){return console.error("Cannot save to localStorage:",t),!1}}function loadFromLocalStorage(t){try{const e=localStorage.getItem(t);return e?JSON.parse(e):null}catch(t){return console.error("Cannot load from localStorage:",t),null}}function initializeDarkMode(){const t=document.getElementById("dark-mode-toggle");document.getElementById("dark-mode-icon");let e=null;try{e=localStorage.getItem("theme")}catch(t){e=null}const n=e||"light";document.documentElement.setAttribute("data-theme",n),updateDarkModeIcon(n),t&&t.addEventListener("click",function(){const t="dark"===document.documentElement.getAttribute("data-theme")?"light":"dark";document.documentElement.setAttribute("data-theme",t);try{localStorage.setItem("theme",t)}catch(t){}updateDarkModeIcon(t),"undefined"!=typeof gtag&&gtag("event","theme_change",{event_category:"user_interface",event_label:t,theme_switched_to:t})}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",function(t){let e=!1;try{e=!!localStorage.getItem("theme")}catch(t){e=!1}if(!e){const e=t.matches?"dark":"light";document.documentElement.setAttribute("data-theme",e),updateDarkModeIcon(e)}})}function updateDarkModeIcon(t){const e=document.getElementById("dark-mode-icon");e&&("dark"===t?(e.className="fas fa-sun",e.parentElement.title="Switch to Light Mode"):(e.className="fas fa-moon",e.parentElement.title="Switch to Dark Mode"))}function initializeCustomThemeToggle(){let t=null;try{t=localStorage.getItem("customTheme")}catch(e){t=null}"on"===t&&document.body.classList.add("custom-theme"),document.addEventListener("click",t=>{if(t.target.closest('[data-action="toggle-custom-theme"]')){const t=document.body.classList.toggle("custom-theme");localStorage.setItem("customTheme",t?"on":"off"),announceThemeChange(t),"undefined"!=typeof gtag&&gtag("event","custom_theme_toggle",{event_category:"user_interface",enabled:t})}})}function announceThemeChange(t){let e=document.getElementById("global-live-region");if(!e)return;const n=t?"ui.custom_theme_on":"ui.custom_theme_off",o=window.translationSystem&&window.translationSystem.t?window.translationSystem.t(n):t?"Enhanced theme ON":"Enhanced theme OFF";e.textContent=o}function injectSettingsFloatingButton(){if(document.getElementById("settings-fab"))return;const t=document.createElement("button");t.id="settings-fab",t.className="settings-fab",t.type="button",t.setAttribute("aria-label","Settings"),t.innerHTML='<i class="fas fa-gear"></i>',t.addEventListener("click",openQuickSettingsPanel),document.body.appendChild(t)}function openQuickSettingsPanel(){let t=document.getElementById("quick-settings-panel");t?t.classList.toggle("open"):(t=document.createElement("div"),t.id="quick-settings-panel",t.className="quick-settings-panel",t.innerHTML=`\n      <div class="qs-header">\n        <strong>${window.t?window.t("ui.settings"):"Settings"}</strong>\n        <button type="button" class="btn-close" aria-label="Close" data-action="close-qsp"></button>\n      </div>\n      <div class="qs-body">\n        <button class="btn btn-sm btn-outline-primary w-100 mb-2" data-action="toggle-custom-theme">${window.t?window.t("ui.toggle_custom_theme"):"Toggle enhanced theme"}</button>\n        <button class="btn btn-sm btn-outline-secondary w-100" data-action="close-qsp">${window.t?window.t("ui.close"):"Close"}</button>\n      </div>`,t.addEventListener("click",e=>{e.target.matches('[data-action="close-qsp"]')&&t.classList.remove("open")}),document.body.appendChild(t),requestAnimationFrame(()=>t.classList.add("open")))}document.addEventListener("DOMContentLoaded",function(){initializeDarkMode(),initializeCustomThemeToggle();[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map(function(t){return new bootstrap.Tooltip(t)});document.querySelectorAll('a[href^="#"]').forEach(t=>{t.addEventListener("click",function(t){t.preventDefault();const e=document.querySelector(this.getAttribute("href"));e&&e.scrollIntoView({behavior:"smooth"})})});const t=window.location.pathname;document.querySelectorAll(".navbar-nav .nav-link").forEach(e=>{const n=e.getAttribute("href");n===t||"/"===t&&"/"===n?e.classList.add("active"):e.classList.remove("active")})});